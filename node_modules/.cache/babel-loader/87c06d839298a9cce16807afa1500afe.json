{"ast":null,"code":"var _jsxFileName = \"/Users/wenping/git_repo/Jian-shu/jianshu/src/common/header/index.js\";\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { CSSTransition } from 'react-transition-group';\nimport { actionCreators } from './store';\nimport { actionCreators as loginActionCreators } from '../../pages/login/store';\nimport { Link } from 'react-router-dom';\nimport { HeaderWrapper, Logo, Nav, NavItem, NavSearch, SearchInfo, SearchInfoTitle, SearchInfoSwitch, SearchInfoList, SearchInfoItem, Addition, Button, SearchWrapper } from './style';\n\nclass Header extends Component {\n  getListArea() {\n    const {\n      focused,\n      list,\n      page,\n      totalPage,\n      mouseIn,\n      handleMouseEnter,\n      handleMouseLeave,\n      handleChangePage\n    } = this.props; //结构赋值语法，替代下面的 this.props.focused 为focused；this.props.list为list\n\n    const newList = list.toJS(); //把immutable的list转成普通数组，这样才能取得第[i]个数\n\n    const pageList = [];\n\n    if (newList.length) {\n      for (let i = (page - 1) * 10; i < page * 10; i++) {\n        pageList.push( /*#__PURE__*/React.createElement(SearchInfoItem, {\n          key: newList[i],\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 34,\n            columnNumber: 11\n          }\n        }, newList[i]));\n      }\n    }\n\n    if (focused || mouseIn) {\n      return /*#__PURE__*/React.createElement(SearchInfo, {\n        onMouseEnter: handleMouseEnter,\n        onMouseLeave: handleMouseLeave,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 41,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(SearchInfoTitle, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 45,\n          columnNumber: 11\n        }\n      }, \"\\u70ED\\u95E8\\u641C\\u7D22\", /*#__PURE__*/React.createElement(SearchInfoSwitch, {\n        onClick: () => handleChangePage(page, totalPage, this.spinIcon),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 47,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"i\", {\n        ref: icon => {\n          this.spinIcon = icon;\n        } //ref可以获取dom真实节点\n        ,\n        className: \"iconfont spin\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 50,\n          columnNumber: 15\n        }\n      }, \"\\uE851\"), \"\\u6362\\u4E00\\u6279\")), /*#__PURE__*/React.createElement(SearchInfoList, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 59,\n          columnNumber: 11\n        }\n      }, pageList));\n    } else {\n      return null;\n    }\n  }\n\n  render() {\n    const {\n      focused,\n      handleInputFocus,\n      handleInputBlur,\n      list,\n      login,\n      logout\n    } = this.props;\n    return /*#__PURE__*/React.createElement(HeaderWrapper, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(Link, {\n      to: \"/\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(Logo, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 11\n      }\n    })), /*#__PURE__*/React.createElement(Nav, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(NavItem, {\n      className: \"left active\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 11\n      }\n    }, \"\\u9996\\u9875\"), /*#__PURE__*/React.createElement(NavItem, {\n      className: \"left\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 11\n      }\n    }, \"\\u4E0B\\u8F7DAPP\"), /*#__PURE__*/React.createElement(NavItem, {\n      className: \"right\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"i\", {\n      className: \"iconfont\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 13\n      }\n    }, \"\\uE636\")), login ? /*#__PURE__*/React.createElement(NavItem, {\n      onClick: logout,\n      className: \"right\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 15\n      }\n    }, \"\\u9000\\u51FA\") : /*#__PURE__*/React.createElement(Link, {\n      to: \"/login\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(NavItem, {\n      className: \"right\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 33\n      }\n    }, \"\\u767B\\u5F55\")), /*#__PURE__*/React.createElement(SearchWrapper, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(CSSTransition, {\n      in: focused,\n      timeout: 200,\n      classNames: \"slide\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(NavSearch, {\n      className: focused ? 'focused' : '',\n      onFocus: () => handleInputFocus(list),\n      onBlur: handleInputBlur,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 15\n      }\n    })), /*#__PURE__*/React.createElement(\"i\", {\n      className: focused ? 'focused iconfont zoom' : 'iconfont zoom',\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 13\n      }\n    }, \"\\uE637\"), this.getListArea())), /*#__PURE__*/React.createElement(Addition, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(Button, {\n      className: \"writing\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"i\", {\n      className: \"iconfont\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 13\n      }\n    }, \"\\uE6E5\"), \"\\u5199\\u6587\\u7AE0\"), /*#__PURE__*/React.createElement(Button, {\n      className: \"reg\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 11\n      }\n    }, \"\\u6CE8\\u518C\")));\n  }\n\n}\n\nconst mapStateToProps = state => {\n  return {\n    focused: state.getIn(['header', 'focused']),\n    //从header的store-reudcer里取；immutable用get\n    //focused: state.get('header').get('focused') \n    list: state.getIn(['header', 'list']),\n    page: state.getIn(['header', 'page']),\n    totalPage: state.getIn(['header', 'totalPage']),\n    mouseIn: state.getIn(['header', 'mouseIn']),\n    login: state.getIn(['login', 'login'])\n  };\n};\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    handleInputFocus(list) {\n      if (list.size === 0) {\n        //避免重复发送请求\n        dispatch(actionCreators.getList());\n      }\n\n      dispatch(actionCreators.searchFocus());\n    },\n\n    handleInputBlur() {\n      dispatch(actionCreators.searchBlur());\n    },\n\n    handleMouseEnter() {\n      dispatch(actionCreators.mouseEnter());\n    },\n\n    handleMouseLeave() {\n      dispatch(actionCreators.mouseLeave());\n    },\n\n    handleChangePage(page, totalPage, spin) {\n      let originAngle = spin.style.transform.replace(/[^0-9]/ig, '');\n\n      if (originAngle) {\n        originAngle = parseInt(originAngle, 10);\n      } else {\n        originAngle = 0;\n      }\n\n      spin.style.transform = 'rotate(' + (originAngle + 360) + 'deg)';\n\n      if (page < totalPage) {\n        dispatch(actionCreators.changePage(page + 1));\n      } else {\n        dispatch(actionCreators.changePage(1));\n      }\n    },\n\n    logout() {\n      dispatch();\n    }\n\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Header);","map":{"version":3,"sources":["/Users/wenping/git_repo/Jian-shu/jianshu/src/common/header/index.js"],"names":["React","Component","connect","CSSTransition","actionCreators","loginActionCreators","Link","HeaderWrapper","Logo","Nav","NavItem","NavSearch","SearchInfo","SearchInfoTitle","SearchInfoSwitch","SearchInfoList","SearchInfoItem","Addition","Button","SearchWrapper","Header","getListArea","focused","list","page","totalPage","mouseIn","handleMouseEnter","handleMouseLeave","handleChangePage","props","newList","toJS","pageList","length","i","push","spinIcon","icon","render","handleInputFocus","handleInputBlur","login","logout","mapStateToProps","state","getIn","mapDispatchToProps","dispatch","size","getList","searchFocus","searchBlur","mouseEnter","mouseLeave","spin","originAngle","style","transform","replace","parseInt","changePage"],"mappings":"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","sourcesContent":["import React,{Component} from 'react';\nimport { connect } from 'react-redux';\nimport { CSSTransition } from 'react-transition-group';\nimport {actionCreators} from './store';\nimport { actionCreators as loginActionCreators } from '../../pages/login/store'\nimport { Link } from 'react-router-dom';\nimport {\n  HeaderWrapper,\n  Logo,\n  Nav,\n  NavItem,\n  NavSearch,\n  SearchInfo,\n  SearchInfoTitle,\n  SearchInfoSwitch,\n  SearchInfoList,\n  SearchInfoItem,\n  Addition,\n  Button,\n  SearchWrapper\n} from './style'\n\n\n\nclass Header extends Component {\n  getListArea(){\n    const { focused, list, page, totalPage, mouseIn, handleMouseEnter, handleMouseLeave, handleChangePage } = this.props; //结构赋值语法，替代下面的 this.props.focused 为focused；this.props.list为list\n    const newList = list.toJS();  //把immutable的list转成普通数组，这样才能取得第[i]个数\n    const pageList = [];\n\n    if (newList.length) {\n      for (let i = (page - 1) * 10; i < page * 10; i++) {\n        pageList.push(\n          <SearchInfoItem key={newList[i]}>{newList[i]}</SearchInfoItem>\n        )\n      }\n    }\n  \n    if (focused || mouseIn) {\n      return(\n        <SearchInfo \n          onMouseEnter={handleMouseEnter}\n          onMouseLeave={handleMouseLeave}\n        >\n          <SearchInfoTitle>\n            热门搜索\n            <SearchInfoSwitch\n              onClick={() => handleChangePage(page, totalPage, this.spinIcon)}\n            >\n              <i \n                ref={(icon) => {this.spinIcon = icon}}   //ref可以获取dom真实节点\n                className=\"iconfont spin\"\n              >\n                &#xe851;\n              </i>\n              换一批\n            </SearchInfoSwitch>\n          </SearchInfoTitle>\n          <SearchInfoList>\n            {pageList}\n          </SearchInfoList>\n        </SearchInfo>\n      )\n    } else {\n      return null;\n    }\n  }\n  render(){\n    const { focused,handleInputFocus,handleInputBlur, list, login, logout  } = this.props;\n    return (\n      <HeaderWrapper>\n        <Link to=\"/\">\n          <Logo />\n        </Link>\n        <Nav>\n          <NavItem className=\"left active\">首页</NavItem>\n          <NavItem className=\"left\">下载APP</NavItem>\n          <NavItem className=\"right\">\n            <i className=\"iconfont\">&#xe636;</i>\n          </NavItem>\n          {\n            login ? \n              <NavItem onClick={logout} className=\"right\">退出</NavItem> : \n              <Link to='/login'><NavItem className=\"right\">登录</NavItem></Link> \n          }\n          \n          <SearchWrapper>\n            <CSSTransition\n              in={focused}\n              timeout={200}\n              classNames=\"slide\"\n            >\n              <NavSearch\n                className={focused ? 'focused' : ''}\n                onFocus={() => handleInputFocus(list)}\n                onBlur={handleInputBlur}\n              ></NavSearch>\n            </CSSTransition>\n            <i className={focused ? 'focused iconfont zoom' : 'iconfont zoom'}>&#xe637;</i>\n            {this.getListArea()}\n          </SearchWrapper>\n        </Nav>\n        <Addition>\n          <Button className=\"writing\">\n            <i className=\"iconfont\">&#xe6e5;</i>\n            写文章\n          </Button>\n          <Button className=\"reg\">注册</Button>\n        </Addition>\n      </HeaderWrapper>\n    )\n  }\n}\n\nconst mapStateToProps = (state) => {\n  return {\n    focused: state.getIn(['header','focused']),  //从header的store-reudcer里取；immutable用get\n    //focused: state.get('header').get('focused') \n    list: state.getIn(['header','list']),\n    page: state.getIn(['header','page']),\n    totalPage: state.getIn(['header','totalPage']),\n    mouseIn: state.getIn(['header','mouseIn']),\n    login: state.getIn(['login','login'])\n  }\n}\nconst mapDispatchToProps = (dispatch) => {\n  return {\n    handleInputFocus(list) {\n      if (list.size === 0) {    //避免重复发送请求\n        dispatch(actionCreators.getList());\n      }  \n      dispatch(actionCreators.searchFocus());\n    },\n    handleInputBlur() {\n      dispatch(actionCreators.searchBlur());\n    },\n    handleMouseEnter() {\n      dispatch(actionCreators.mouseEnter());\n    },\n    handleMouseLeave() {\n      dispatch(actionCreators.mouseLeave());\n    },\n    handleChangePage(page, totalPage, spin) {\n      let originAngle = spin.style.transform.replace(/[^0-9]/ig,'');\n      if (originAngle) {\n        originAngle = parseInt(originAngle,10);\n      } else {\n        originAngle = 0;\n      }\n      spin.style.transform = 'rotate('+ (originAngle + 360) + 'deg)';\n      if (page < totalPage) {\n        dispatch(actionCreators.changePage(page + 1));\n      } else {\n        dispatch(actionCreators.changePage(1));\n      }\n    },\n    logout(){\n      dispatch()\n    }\n\n  }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Header)"]},"metadata":{},"sourceType":"module"}